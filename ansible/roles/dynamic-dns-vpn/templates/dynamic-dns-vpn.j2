#!/usr/bin/env bash
# coding=utf-8
# Don't `set -e`. If one DDNS update can't be completed (that is, if one curl
# invocation fails), we still want to attempt the remaining DDNS updates.
set -uo pipefail

dynamic_dns_vpn_urls=(
    {% for dynamic_dns_vpn_url in dynamic_dns_vpn_urls %}
    '{{ dynamic_dns_vpn_url }}'
    {% endfor %}
)
for dynamic_dns_vpn_url in "${dynamic_dns_vpn_urls[@]}"; do
    curl --silent --show-error --interface tun0 "$dynamic_dns_vpn_url" 1>/dev/null
done

